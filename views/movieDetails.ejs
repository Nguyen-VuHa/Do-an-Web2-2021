<!-- modal Trailer -->
<div class="modal-bg">
    <div class="modal-trailer">
        <a class="btn-close" ><i class="fal fa-times-circle"></i></a>
        <div class="content-video-trailler">
            <iframe id="trailerIframe" class="trailerIframe" frameborder="0" src="https://www.youtube.com/embed/<%= obData.trailer %>?enablejsapi=1" allowfullscreen="true" ></iframe>
        </div>
    </div>
</div>

<section class="movie-detail">
    <div class="background-advertisement">
        <div id="stars"></div>
        <div id="stars2"></div>
        <div id="stars3"></div>
      </div>
      <div class="container">
        <div class="movie__title">
            <a href="/" style="text-decoration: none;"><h3>Trang Chủ</h3></a>
            <h4> &#10147; <%= obData.movieName %></h4>
        </div>
        <div class="movie__content">
            <div class="movie__slider-poster">
                <div class="promotion-slider">
                    <!-- fade css -->
                    <div class="myslider">
                        <img src="<%= obData.poster1 %>" style="background-size:cover; width: 100%; height: 100%;">
                    </div>
                    <div class="myslider">
                        <img src="<%= obData.poster2 %>" style="background-size:cover; width: 100%; height: 100%;">
                    </div>
                    <div class="myslider">
                        <img src="<%= obData.poster3 %>" style="background-size:cover;  width: 100%; height: 100%;">
                    </div>
                    <div class="myslider">
                        <img src="<%= obData.poster4 %>" style="background-size:cover; width: 100%; height: 100%;">
                    </div>
                    <!-- onclick js -->
                    <a class="btn-prev" onclick="plusSlides(-1)" style="color:  #54ab35;">&#10094;</a>
                      <a class="btn-next" onclick="plusSlides(1)" style="color: #54ab35;">&#10095;</a>
                    
                    <div class="dotsbox" style="text-align:center">
                        <span class="dot" onclick="currentSlide(1)"></span>
                        <span class="dot" onclick="currentSlide(2)"></span>
                        <span class="dot" onclick="currentSlide(3)"></span>
                        <span class="dot" onclick="currentSlide(4)"></span>
                    </div>
                    <!-- /onclick js -->
                    <script>
                        var array = document.querySelectorAll('.myslider');
                    </script>
                </div>
            </div>
            <div class="movie__info--film">
                <h4 class="film--name"><%= obData.movieName %> (<%= obData.specific %>)</h4>
                <p class="film--desc"><%= obData.describe %></p>
                <ul class="group__info-film">
                    <li class="group-film"> 
                        <label class="group__title" for="">Phân loại</label>
                        <p>C18 - PHIM DÀNH CHO KHÁN GIẢ TỪ 18 TUỔI TRỞ LÊN</p>
                    </li>
                    <li class="group-film"> 
                        <label class="group__title" for="">Đạo diễn</label>
                        <span><%= obData.directors %></span>
                    </li>
                    <li class="group-film"> 
                        <label class="group__title" for="">Diễn viên</label>
                        <span><%= obData.mainActor %></span>
                    </li>
                    <li class="group-film"> 
                        <label class="group__title" for="">Thể loại</label>
                        <span><%= obData.category %></span>
                    </li>
                    <li class="group-film"> 
                        <label class="group__title" for="">Khởi chiếu</label>
                        <span><%= obData.premiereDate %></span>
                    </li>
                    <li class="group-film"> 
                        <label class="group__title" for="">Thời lượng</label>
                        <span><%= obData.time %> phút</span>
                    </li>
                    <li class="group-film"> 
                        <label class="group__title" for="">Ngôn ngữ</label>
                        <span>Phụ đề tiếng Việt</span>
                    </li>
                </ul>
                <div class="group__button">
                    <a style="color: #fff;" class="btn btn-success btn-modal">Xem Trailer</a>
                    <a style="color: #fff;" class="btn btn-success">Mua vé</a>
                </div>
            </div>
        </div>
      </div>
</section>
<script src="../js/home.js"></script>
<script>
    var modalBtn = document.querySelector('.btn-modal');
    var modalBg = document.querySelector('.modal-bg');
    var closeBtn = document.querySelector('.btn-close');

    window.onclick = function(event) {
        if (event.target == modalBg) {  
            modalBg.classList.remove('bg-active');
            stopAllYouTubeVideos();
        }
    }

    modalBtn.addEventListener('click', function() {
        modalBg.classList.add('bg-active');
        playAllYouTubeVideos();
    })

    closeBtn.addEventListener('click', function() {
        modalBg.classList.remove('bg-active');
        stopAllYouTubeVideos();
    })

    var playAllYouTubeVideos = () => { 
    var iframes = document.querySelectorAll('iframe');
        Array.prototype.forEach.call(iframes, iframe => { 
            iframe.contentWindow.postMessage(JSON.stringify({ event: 'command', 
        func: 'playVideo' }), '*');
        });
    }

    var stopAllYouTubeVideos = () => { 
    var iframes = document.querySelectorAll('iframe');
        Array.prototype.forEach.call(iframes, iframe => { 
            iframe.contentWindow.postMessage(JSON.stringify({ event: 'command', 
        func: 'stopVideo' }), '*');
        });
    }

</script>

<script src="../js/header.js"></script>